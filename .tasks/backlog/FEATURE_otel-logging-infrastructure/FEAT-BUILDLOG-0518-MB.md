+++
id = "FEAT-BUILDLOG-0518-MB"
title = "Build Log Viewer Utility"
type = "implementation"
status = "üü° To Do"
priority = "‚ñ∂Ô∏è Medium"
created_date = "2025-05-18"
updated_date = "2025-05-18"
assigned_to = ""
phase = "backlog"
parent_task = "otel-logging-infrastructure"
depends_on = [ "RESEARCH-RESEARCHOTEL-0518-F5" ]
tags = [ "AREA:core", "implementation", "tooling" ]
subdirectory = "FEATURE_otel-logging-infrastructure"
+++

# Build Log Viewer Utility

## Objective
Create a basic log viewer utility for local development that provides a convenient way to view and tail log files generated by the OTEL infrastructure.

## Implementation Tasks

### 1. Basic Viewer Implementation
- [ ] Create `src/core/observability/log-viewer.ts`
- [ ] Implement file watching with Bun's fs APIs
- [ ] Add tail functionality for latest logs
- [ ] Support multiple log files

### 2. Formatting and Display
- [ ] Parse JSON log entries
- [ ] Format logs for terminal display
- [ ] Add color coding by log level
- [ ] Support configurable display columns

### 3. Filtering Capabilities
- [ ] Filter by log level
- [ ] Filter by module name
- [ ] Filter by time range
- [ ] Support regex pattern matching

### 4. User Interface
- [ ] CLI arguments for viewer options
- [ ] Interactive mode for real-time filtering
- [ ] Help text and usage examples
- [ ] Error handling for missing files

### 5. Integration
- [ ] Add npm script for easy launch
- [ ] Document usage in README
- [ ] Integrate with main CLI as subcommand
- [ ] Test with actual OTEL logs

## Code Structure

```typescript
// src/core/observability/log-viewer.ts
interface LogViewerOptions {
  directory: string;
  follow: boolean;
  level?: LogLevel;
  module?: string;
  lines?: number;
}

export function runLogViewer(options: LogViewerOptions): void;

// Usage example
// bun run log-viewer --follow --level=error --module=mcp
```

## Acceptance Criteria

- [ ] Can view logs from multiple files
- [ ] Real-time updates when following
- [ ] Proper formatting for readability  
- [ ] Filtering works as expected
- [ ] Handles file rotation gracefully
- [ ] Clear documentation provided

## Dependencies
- Depends on: RESEARCH-RESEARCHOTEL-0518-F5 (to understand log format)
- Can be developed in parallel with core implementation

## Technical Notes
- Use Bun's native file watching capabilities
- Keep dependencies minimal for portability
- Consider terminal width for formatting
- Handle large log files efficiently

## Links to Context
- **Original Proposal**: TASK-FEATUREPROPOSAL-0518-CZ
- Feature: OpenTelemetry Logging Infrastructure for All Modules
