+++
id = "TASK-20250513T134102"
title = "Add Feature and Area Support to Task UI"
type = "üåü Feature"
status = "üü¢ Done"
priority = "üîº High"
created_date = "2025-05-13"
updated_date = "2025-05-16"
assigned_to = "react-dev"
phase = "release-v1"
subdirectory = "AREA_UI"
tags = [ "ui", "feature", "area", "hierarchy", "react" ]
+++

# Add Feature and Area Support to Task UI

## Description ‚úçÔ∏è

The task management UI currently displays tasks in a flat list or by phase, but doesn't allow visualizing and navigating the hierarchical structure of features/areas. This task involves improving the UI to fully support the MDTM directory structure of features and areas, making it easier to work with organized task collections.

## Objectifs et Crit√®res d'Acceptation ‚úÖ

### Phase 1: Hierarchical Visualization (High Priority)
* - [x] **Grouped display in the task table**:
  * - [x] Add a "Feature/Area" column in the task list
  * - [x] Allow sorting and filtering by feature/area
  * - [x] Visually distinguish features and areas (different icons)
  * - [x] Add a progress indicator for each feature/area

* - [x] **Detailed view for a specific Feature/Area**:
  * - [x] Create dedicated routes `/feature/:id` and `/area/:id`
  * - [x] Display header with title, description, and status
  * - [x] List all tasks belonging to this feature/area
  * - [x] Integrate a progress indicator (% of completed tasks)

* - [x] **Contextualized navigation**:
  * - [x] In the detailed task view, display its parent feature/area
  * - [x] Add navigation links to return to the feature/area

### Phase 2: Organization and Filtering (Medium Priority)
* - [x] **Advanced filters in the main list**:
  * - [x] Add a filter section dedicated to features/areas
  * - [x] Support filter combinations (phase + feature/area + status)
  * - [x] Allow quick filtering by popular features/areas

* - [x] **Smart back-navigation**:
  * - [x] Preserve feature/area context during navigation
  * - [x] Intelligent return to filtered list after task editing

### Phase 3: Advanced Interactions (Low Priority)
* - [ ] **Reorganization through simplified interface**:
  * - [ ] Allow moving tasks between features/areas via dropdown list
  * - [ ] Support for batch organization (multiple task selection)

* - [ ] **Feature/area editing interface**:
  * - [ ] Dedicated forms for creating/modifying features and areas
  * - [ ] Support for defining metadata and descriptions

## Implementation Requirements üìù

### Required API

The user interface will consume the enhanced API endpoints developed in the related task "Enhance Feature and Area Support in CLI and MCP" (TASK-20250513T132917). Key endpoints include:

* Feature list endpoint (feature_list)
* Feature details endpoint (feature_get)
* Area list endpoint (area_list)
* Area details endpoint (area_get)
* Enhanced task list with hierarchical information
* Task movement endpoint for reorganization features

### Technical Approach

#### Modification de la DataTable
```tsx
// Extension de la DataTable existante
<DataTable 
  columns={columns} 
  data={filteredTasks}
  groupBy="subdirectory"  // Nouveau param√®tre pour grouper par feature/area
  groupRenderer={(group) => (
    <FeatureAreaGroupHeader 
      name={group.name} 
      type={group.type} // "feature" ou "area"
      taskCount={group.items.length}
      progress={calculateProgress(group.items)}
    />
  )}
/>
```

#### Nouvelle Route Feature/Area
```tsx
// Nouveaux composants pour l'affichage d√©di√©
<Route path="/feature/:id" component={FeatureView} />
<Route path="/area/:id" component={AreaView} />

// Composant FeatureView (similaire pour AreaView)
function FeatureView() {
  const { id } = useParams();
  const { tasks } = useTaskContext();
  
  // Filtrer les t√¢ches appartenant √† cette feature
  const featureTasks = tasks.filter(task => 
    task.subdirectory === `FEATURE_${id}`
  );
  
  return (
    <div>
      <FeatureHeader id={id} />
      <ProgressIndicator tasks={featureTasks} />
      <TaskListView tasks={featureTasks} />
    </div>
  );
}
```

#### Extension du Filtre Existant
```tsx
// Ajout de filtres pour features/areas
function FeatureAreaFilters({
  filters,
  onFilterChange,
  featureOptions,
  areaOptions
}) {
  // Logique de filtrage
  return (
    <div className="filter-section">
      <h3>Features</h3>
      {featureOptions.map(feature => (
        <FilterCheckbox
          key={feature}
          label={feature.replace('FEATURE_', '')}
          checked={filters.subdirectory === feature}
          onChange={() => handleFeatureChange(feature)}
        />
      ))}
      
      <h3>Areas</h3>
      {areaOptions.map(area => (
        <FilterCheckbox
          key={area}
          label={area.replace('AREA_', '')}
          checked={filters.subdirectory === area}
          onChange={() => handleAreaChange(area)}
        />
      ))}
    </div>
  );
}
```

### UI Components to Develop

1. **Feature/Area Column**:
   - Display feature/area name in the task table
   - Visual badges with differentiation between features vs areas

2. **Group Header**:
   - Component for feature/area groups in the table
   - Progress bar and summary information

3. **Detail Page**:
   - Complete view for a specific feature or area
   - Overview content
   - Filtered task list
   - Progress metrics

4. **Enhanced Filters**:
   - Filter section dedicated to features/areas
   - Multi-selection and combination support

5. **Movement Interfaces**:
   - Dropdown lists for moving tasks
   - Batch selection mode

### Design Considerations

- Maintain consistency with the existing UI design language
- Ensure accessibility for all new UI components
- Optimize for desktop and mobile views
- Consider performance implications of displaying hierarchical data
- Use progressive disclosure to manage complexity
- Apply consistent color coding across all views

## Dependencies üîÑ

- Depends on backend implementation of feature/area support (TASK-20250513T132917)
- Requires API endpoints for:
  - Feature/area listing
  - Feature/area details
  - Moving tasks between features/areas
  - Hierarchical task lists

## Suggested Implementation Approach üí°

- **Phase 1**: Basic visualization (1-2 weeks)
  - Implementation of feature/area column in the list
  - Addition of grouping by feature/area
  - Creation of detailed pages for features/areas
  
- **Phase 2**: Filtering and navigation (1 week)
  - Implementation of advanced filters
  - Improvement of contextual navigation
  - Addition of the progress indicator
  
- **Phase 3**: Organization and creation (1 week)
  - Task movement interface
  - Forms for creating/editing features and areas
  - Batch operations for task management

## Review Notes üëÄ

- Coordinate with backend developers working on feature/area API endpoints
- Focus on incremental deployment to quickly provide core functionality
- Consider A/B testing for the feature/area visualization approach

## Mises √† jour üîÑ

- **2025-05-15**: Sp√©cification UX enti√®rement r√©vis√©e pour prioriser la visualisation hi√©rarchique, le filtrage et la navigation contextuelle. L'approche est simplifi√©e et progressive, en commen√ßant par les fonctionnalit√©s les plus importantes pour les utilisateurs.
- **2025-05-15**: Impl√©mentation compl√®te des fonctionnalit√©s de visualisation hi√©rarchique et filtrage. La Phase 3 "Interactions Avanc√©es" reste √† faire dans une t√¢che future.
- **2025-05-15**: Plan d'√©volution d√©fini pour traiter les features/areas dans plusieurs phases avec une approche de visualisation unifi√©e.

## Evolution Plan: Multi-Phase Features/Areas üîÑ

### Problem Statement
Features and areas can exist across multiple phases, creating duplicates in the user interface. We want to treat them as unique entities at the UI level while preserving their phase association.

### Proposed Approach

#### 1. API with Deduplication Support
- Add a `deduplicate=true` parameter to the `/features` and `/areas` endpoints
- When enabled, the API returns features/areas with their associated phases
- Modified response format including a list of phases and aggregated progress metrics
  ```json
  {
    "id": "FEATURE_Authentication",
    "name": "Authentication",
    "phases": ["release-v1", "release-v2"],
    "progress": {
      "total": { "completed": 10, "total": 15, "percentage": 66 },
      "byPhase": {
        "release-v1": { "completed": 8, "total": 8, "percentage": 100 },
        "release-v2": { "completed": 2, "total": 7, "percentage": 28 }
      }
    }
  }
  ```

#### 2. Advanced Hierarchical Views
- **Phase View**: Group tasks by feature/area
  - A reusable `PhaseDetailView` component
  - Contextual navigation between phases
  
- **Feature/Area View**: Group tasks by phase
  - Refactor `FeatureDetailView` and `AreaDetailView` to support phase grouping
  - Show a distinct section for each phase where the feature/area exists
  - Display progress metrics for each phase

#### 3. Reusable Components
- Create a framework of generic components adaptable to different contexts
- Implement a `GroupedTaskTable` component supporting different grouping modes
- Use section headers for phases, features, and areas

#### 4. Contextual Navigation
- Add a hierarchical navigation bar (breadcrumb) 
- Allow quick switching between associated phases
- Preserve context when navigating between different views

### Implementation Plan

**Step 1: API and Client**
- Update API-side endpoints
- Modify API client functions to support the new parameter
- Adapt React contexts to use deduplication when appropriate

**Step 2: UI Components**
- Refactor existing views to support multi-phase grouping
- Create the new phase view with feature/area grouping
- Implement contextual navigation

**Step 3: Integration and Testing**
- Integrate the new views into the main navigation
- Optimize performance for multi-phase loading
- Comprehensive testing with different combinations of features/areas/phases
